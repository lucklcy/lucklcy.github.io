---
layout: post
title: "packageè§£æ"
date: 2021-09-23
author: lucklcy
cover: "/assets/img/npm.jpg"
tags: npm
---

## ä½ çœŸçš„äº†è§£ package.json å—ï¼Ÿæ¥çœ‹çœ‹å§ï¼Œè¿™å¯èƒ½æ˜¯æœ€å…¨çš„ package è§£æ

## 1. æ¦‚è¿°

---

ä»æˆ‘ä»¬æ¥è§¦å‰ç«¯å¼€å§‹ï¼Œæ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ª package.json æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å½“å‰é¡¹ç›®æ‰€éœ€è¦çš„å„ç§æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰ï¼‰ã€‚

å½“è¿è¡Œ npm install å‘½ä»¤çš„æ—¶å€™ï¼Œä¼šæ ¹æ® package.json æ–‡ä»¶ä¸­çš„é…ç½®è‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚

æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ–‡ä»¶ï¼Œåªå­˜åœ¨ç®€å•çš„é¡¹ç›®åç§°å’Œç‰ˆæœ¬å·ã€‚

```
{
  "name" : "yindong",
  "version" : "1.0.0",
}
```

package.json æ–‡ä»¶æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œè¿™ä»ä»–çš„åç¼€å.json å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸€ä¸ªæˆå‘˜å°±æ˜¯å½“å‰é¡¹ç›®çš„ä¸€é¡¹è®¾ç½®ã€‚æ¯”å¦‚ name å°±æ˜¯é¡¹ç›®åç§°ï¼Œversion æ˜¯ç‰ˆæœ¬å·ã€‚

å½“ç„¶å¾ˆå¤šäººå…¶å®å¹¶ä¸å…³å¿ƒ package.json çš„é…ç½®ï¼Œä»–ä»¬åº”ç”¨çš„æ›´å¤šçš„æ˜¯ dependencies æˆ– devDependencies é…ç½®ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„ package.json æ–‡ä»¶ï¼Œè¯¦ç»†è§£é‡Šä¸€ä¸‹æ¯ä¸ªå­—æ®µçš„çœŸå®å«ä¹‰ã€‚

```
{
    "name": "yindong",
    "version":"0.0.1",
    "description": "antd-theme",
    "keywords":["node.js","antd", "theme"],
    "homepage": "https://zhiqianduan.com",
    "bugs":{"url":"http://path/to/bug","email":"yindong@xxxx.com"},
    "license": "ISC",
    "author": "yindong",
    "contributors":[{"name":"yindong","email":"yindong@xxxx.com"}],
    "files": "",
    "main": "./dist/default.js",
    "bin": "",
    "man": "",
    "directories": "",
    "repository": {
		"type": "git",
		"url": "https://path/to/url"
	},
    "scripts": {
      "start": "webpack serve --config webpack.config.dev.js --progress"
    },
    "config": { "port" : "8080" },
    "dependencies": {},
    "devDependencies": {
        "@babel/core": "^7.14.3",
        "@babel/preset-env": "^7.14.4",
        "@babel/preset-react": "^7.13.13",
        "babel-loader": "^8.2.2",
        "babel-plugin-import": "^1.13.3",
        "glob": "^7.1.7",
        "less": "^3.9.0",
        "less-loader": "^9.0.0",
        "style-loader": "^2.0.0",
        "webpack": "^5.38.1",
        "webpack-cli": "^4.7.0",
        "webpack-dev-server": "^3.11.2"
    },
    "peerDependencies": {
        "tea": "2.x"
    },
    "bundledDependencies": [
        "renderized", "super-streams"
    ],
    "engines": {"node": "0.10.x"},
	  "os" : [ "win32", "darwin", "linux" ],
    "cpu" : [ "x64", "ia32" ],
    "private": false,
    "publishConfig": {}
  }
```

## 2. name å­—æ®µ

---

package.json æ–‡ä»¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ name å’Œ version å­—æ®µï¼Œè¿™ä¸¤é¡¹æ˜¯å¿…å¡«çš„ã€‚åç§°å’Œç‰ˆæœ¬ä¸€èµ·æ„æˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦è¢«è®¤ä¸ºæ˜¯å®Œå…¨å”¯ä¸€çš„ã€‚å¯¹åŒ…çš„æ›´æ”¹åº”è¯¥ä¸å¯¹ç‰ˆæœ¬çš„æ›´æ”¹ä¸€èµ·è¿›è¡Œã€‚
name å¿…é¡»å°äºç­‰äº 214 ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä»¥.æˆ–\_å¼€å¤´ï¼Œä¸èƒ½æœ‰å¤§å†™å­—æ¯ï¼Œå› ä¸ºåç§°æœ€ç»ˆæˆä¸º URL çš„ä¸€éƒ¨åˆ†å› æ­¤ä¸èƒ½åŒ…å«ä»»ä½•é URL å®‰å…¨å­—ç¬¦ã€‚

npm å®˜æ–¹å»ºè®®æˆ‘ä»¬ä¸è¦ä½¿ç”¨ä¸æ ¸å¿ƒèŠ‚ç‚¹æ¨¡å—ç›¸åŒçš„åç§°ã€‚ä¸è¦åœ¨åç§°ä¸­åŠ  js æˆ– nodeã€‚å¦‚æœéœ€è¦å¯ä»¥ä½¿ç”¨ engines æ¥æŒ‡å®šè¿è¡Œç¯å¢ƒã€‚
å­—æ®µä¸èƒ½ä¸å…¶ä»–æ¨¡å—åé‡å¤ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ¨¡å—åæ˜¯å¦å·²ç»è¢«ä½¿ç”¨ï¼š

```
npm view <packageName>
```

è¯¥åç§°ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™ requireï¼Œå› æ­¤å®ƒåº”è¯¥æ˜¯ç®€çŸ­çš„ï¼Œä½†ä¹Ÿéœ€è¦å…·æœ‰åˆç†çš„æè¿°æ€§ã€‚

- æ¨¡å—åä¼šæˆä¸ºæ¨¡å— urlã€å‘½ä»¤è¡Œä¸­çš„ä¸€ä¸ªå‚æ•°æˆ–è€…ä¸€ä¸ªæ–‡ä»¶å¤¹åç§°ï¼Œä»»ä½•é url å®‰å…¨çš„å­—ç¬¦åœ¨æ¨¡å—åä¸­éƒ½ä¸èƒ½ä½¿ç”¨ï¼ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ validate-npm-package-name åŒ…æ¥æ£€æµ‹æ¨¡å—åæ˜¯å¦åˆæ³•ï¼‰ï¼›
- è¯­ä¹‰åŒ–æ¨¡å—åï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¿«çš„æ‰¾åˆ°éœ€è¦çš„æ¨¡å—ï¼Œå¹¶ä¸”é¿å…æ„å¤–è·å–é”™è¯¯çš„æ¨¡å—ï¼›
- è‹¥æ¨¡å—åç§°ä¸­å­˜åœ¨ä¸€äº›ç¬¦å·ï¼Œå°†ç¬¦å·å»é™¤åä¸å¾—ä¸ç°æœ‰çš„æ¨¡å—åé‡å¤ï¼Œä¾‹å¦‚ï¼šç”±äº react-router-dom å·²ç»å­˜åœ¨ï¼Œreact.router.domã€reactrouterdom éƒ½ä¸å¯ä»¥å†åˆ›å»ºã€‚

## 3. version å­—æ®µ

---

version ä¸€èˆ¬çš„æ ¼å¼æ˜¯ x.x.x, å¹¶ä¸”éœ€è¦éµå¾ªè¯¥è§„åˆ™ã€‚

package.json æ–‡ä»¶ä¸­æœ€é‡è¦çš„å°±æ˜¯ name å’Œ version å­—æ®µï¼Œè¿™ä¸¤é¡¹æ˜¯å¿…å¡«çš„ã€‚åç§°å’Œç‰ˆæœ¬ä¸€èµ·æ„æˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦è¢«è®¤ä¸ºæ˜¯å®Œå…¨å”¯ä¸€çš„ã€‚æ¯æ¬¡å‘å¸ƒæ—¶ version ä¸èƒ½ä¸å·²å­˜åœ¨çš„ä¸€è‡´ã€‚

- npm åŒ…ä¸­çš„æ¨¡å—ç‰ˆæœ¬éƒ½éœ€è¦éµå¾ª SemVer è§„èŒƒï¼Œè¯¥è§„èŒƒçš„æ ‡å‡†ç‰ˆæœ¬å·é‡‡ç”¨ X.Y.Z çš„æ ¼å¼ï¼Œå…¶ä¸­ Xã€Y å’Œ Z å‡ä¸ºéè´Ÿçš„æ•´æ•°ï¼Œä¸”ç¦æ­¢åœ¨æ•°å­—å‰æ–¹è¡¥é›¶ï¼š

  - X æ˜¯ä¸»ç‰ˆæœ¬å·(major)ï¼šä¿®æ”¹äº†ä¸å…¼å®¹çš„ API
  - Y æ˜¯æ¬¡ç‰ˆæœ¬å·(minor)ï¼šæ–°å¢äº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½
  - Z ä¸ºä¿®è®¢å·(patch)ï¼šä¿®æ­£äº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜

- å½“æŸä¸ªç‰ˆæœ¬æ”¹åŠ¨æ¯”è¾ƒå¤§ã€å¹¶éç¨³å®šè€Œä¸”å¯èƒ½æ— æ³•æ»¡è¶³é¢„æœŸçš„å…¼å®¹æ€§éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½è¦å…ˆå‘å¸ƒä¸€ä¸ªå…ˆè¡Œç‰ˆæœ¬ã€‚
- å…ˆè¡Œç‰ˆæœ¬å·å¯ä»¥åŠ åˆ°ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·çš„åé¢ï¼Œé€šè¿‡ - å·è¿æ¥ä¸€è¿ä¸²ä»¥å¥ç‚¹åˆ†éš”çš„æ ‡è¯†ç¬¦å’Œç‰ˆæœ¬ç¼–è¯‘ä¿¡æ¯ï¼š

  - å†…éƒ¨ç‰ˆæœ¬(alpha)
  - å…¬æµ‹ç‰ˆæœ¬(beta)
  - æ­£å¼ç‰ˆæœ¬çš„å€™é€‰ç‰ˆæœ¬ rcï¼ˆå³ Release candiateï¼‰

- æˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ¨¡å—çš„ç‰ˆæœ¬ï¼š

```
npm view <packageName> version # æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬
npm view <packageName> versions # æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æ‰€æœ‰å†å²ç‰ˆæœ¬
```

## 4. description å­—æ®µ

---

description æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºç¼–å†™æè¿°ä¿¡æ¯ã€‚æœ‰åŠ©äºäººä»¬åœ¨ npm åº“ä¸­æœç´¢çš„æ—¶å€™å‘ç°ä½ çš„æ¨¡å—ã€‚

## 5. keywords å­—æ®µ

---

keywords æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ï¼Œæœ‰åŠ©äºäººä»¬åœ¨ npm åº“ä¸­æœç´¢çš„æ—¶å€™å‘ç°ä½ çš„æ¨¡å—ã€‚

## 6. homepage å­—æ®µ

---

homepage é¡¹ç›®çš„ä¸»é¡µåœ°å€ã€‚

## 7. bugs å­—æ®µ

---

bugs ç”¨äºé¡¹ç›®é—®é¢˜çš„åé¦ˆ issue åœ°å€æˆ–è€…ä¸€ä¸ªé‚®ç®±ã€‚

```
"bugs": {
  "url" : "https://github.com/owner/project/issues",
  "email" : "project@hostname.com"
}
```

## 8. license å­—æ®µ

---

license æ˜¯å½“å‰é¡¹ç›®çš„åè®®ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–ä»¬æœ‰ä½•æƒé™æ¥ä½¿ç”¨ä½ çš„æ¨¡å—ï¼Œä»¥åŠä½¿ç”¨è¯¥æ¨¡å—æœ‰å“ªäº›é™åˆ¶ã€‚
"license" : "BSD-3-Clause"
å¤åˆ¶ä»£ç 

## 9. author å­—æ®µ contributors å­—æ®µ

---

author æ˜¯å…·ä½“ä¸€ä¸ªäººï¼Œcontributors è¡¨ç¤ºä¸€ç¾¤äººï¼Œä»–ä»¬éƒ½è¡¨ç¤ºå½“å‰é¡¹ç›®çš„å…±äº«è€…ã€‚åŒæ—¶æ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å…·æœ‰ name å­—æ®µå’Œå¯é€‰çš„ url åŠ email å­—æ®µã€‚

```
"author": {
  "name" : "yindong",
  "email" : "yindong@xx.com",
  "url" : "https://zhiqianduan.com/"
}
```

ä¹Ÿå¯ä»¥å†™æˆä¸€ä¸ªå­—ç¬¦ä¸²

```
"author": "yindong yindong@xx.com (https://zhiqianduan.com/)"
```

## 10. files å­—æ®µ

---

files å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå†…å®¹æ˜¯æ¨¡å—ä¸‹æ–‡ä»¶åæˆ–è€…æ–‡ä»¶å¤¹åï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹åï¼Œåˆ™æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ä¹Ÿä¼šè¢«åŒ…å«è¿›æ¥ï¼ˆé™¤éæ–‡ä»¶è¢«å¦ä¸€äº›é…ç½®æ’é™¤äº†ï¼‰

å¯ä»¥åœ¨æ¨¡å—æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.npmignore æ–‡ä»¶ï¼Œå†™åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œè¾¹çš„æ–‡ä»¶å³ä¾¿è¢«å†™åœ¨ files å±æ€§é‡Œè¾¹ä¹Ÿä¼šè¢«æ’é™¤åœ¨å¤–ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å†™æ³•ä¸.gitignore ç±»ä¼¼ã€‚

## 11. main å­—æ®µ

---

main å­—æ®µæŒ‡å®šäº†åŠ è½½çš„å…¥å£æ–‡ä»¶ï¼Œrequire å¯¼å…¥çš„æ—¶å€™å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚

## 12. bin å­—æ®µ

---

bin é¡¹ç”¨æ¥æŒ‡å®šæ¯ä¸ªå†…éƒ¨å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚å¦‚æœä½ ç¼–å†™çš„æ˜¯ä¸€ä¸ª node å·¥å…·çš„æ—¶å€™ä¸€å®šä¼šç”¨åˆ° bin å­—æ®µã€‚
å½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª cli å·¥å…·çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šå·¥å…·çš„è¿è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚å¸¸ç”¨çš„ webpack æ¨¡å—ï¼Œä»–çš„è¿è¡Œå‘½ä»¤å°±æ˜¯ webpackã€‚

```
"bin": {
  "webpack": "bin/index.js",
}
```

å½“æˆ‘ä»¬æ‰§è¡Œ webpack å‘½ä»¤çš„æ—¶å€™å°±ä¼šæ‰§è¡Œ bin/index.js æ–‡ä»¶ä¸­çš„ä»£ç ã€‚

åœ¨æ¨¡å—ä»¥ä¾èµ–çš„æ–¹å¼è¢«å®‰è£…ï¼Œå¦‚æœå­˜åœ¨ bin é€‰é¡¹ã€‚åœ¨ node_modules/.bin/ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ï¼ŒNpm ä¼šå¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ node_modules/.bin/ç›®å½•ä¸‹å»ºç«‹ç¬¦å·é“¾æ¥ã€‚ç”±äº node_modules/.bin/ç›®å½•ä¼šåœ¨è¿è¡Œæ—¶åŠ å…¥ç³»ç»Ÿçš„ PATH å˜é‡ï¼Œå› æ­¤åœ¨è¿è¡Œ npm æ—¶ï¼Œå°±å¯ä»¥ä¸å¸¦è·¯å¾„ï¼Œç›´æ¥é€šè¿‡å‘½ä»¤æ¥è°ƒç”¨è¿™äº›è„šæœ¬ã€‚

æ‰€æœ‰ node_modules/.bin/ç›®å½•ä¸‹çš„å‘½ä»¤ï¼Œéƒ½å¯ä»¥ç”¨ npm run [å‘½ä»¤]çš„æ ¼å¼è¿è¡Œã€‚åœ¨å‘½ä»¤è¡Œä¸‹ï¼Œé”®å…¥ npm runï¼Œç„¶åæŒ‰ tab é”®ï¼Œå°±ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ã€‚

- ç”¨è¿‡ vue-cliï¼Œcreate-react-app ç­‰è„šæ‰‹æ¶çš„æœ‹å‹ä»¬ï¼Œä¸çŸ¥é“ä½ ä»¬æœ‰æ²¡æœ‰å¥½å¥‡è¿‡ï¼Œä¸ºä»€ä¹ˆå®‰è£…è¿™äº›è„šæ‰‹æ¶åï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»ä¼¼ vue create/create-react-app ä¹‹ç±»çš„å‘½ä»¤ï¼Œå…¶å®è¿™å’Œ package.json ä¸­çš„ bin å­—æ®µæœ‰å…³ã€‚
- bin å­—æ®µç”¨æ¥æŒ‡å®šå„ä¸ªå†…éƒ¨å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚å½“ package.json æä¾›äº† bin å­—æ®µåï¼Œå³ç›¸å½“äºåšäº†ä¸€ä¸ªå‘½ä»¤åå’Œæœ¬åœ°æ–‡ä»¶åçš„æ˜ å°„ã€‚
- å½“ç”¨æˆ·å®‰è£…å¸¦æœ‰ bin å­—æ®µçš„åŒ…æ—¶ï¼Œ

  - å¦‚æœæ˜¯å…¨å±€å®‰è£…ï¼Œnpm å°†ä¼šä½¿ç”¨ç¬¦å·é“¾æ¥æŠŠè¿™äº›æ–‡ä»¶é“¾æ¥åˆ°/usr/local/node_modules/.bin/ï¼›
  - å¦‚æœæ˜¯æœ¬åœ°å®‰è£…ï¼Œä¼šé“¾æ¥åˆ°./node_modules/.bin/ã€‚

- ä¸¾ä¸ª ğŸŒ°ï¼Œå¦‚æœè¦ä½¿ç”¨ my-app-cli ä½œä¸ºå‘½ä»¤æ—¶ï¼Œå¯ä»¥é…ç½®ä»¥ä¸‹ bin å­—æ®µï¼š

```
"bin": {
  "my-app-cli": "./bin/cli.js"
}
```

- ä¸Šé¢ä»£ç æŒ‡å®šï¼Œmy-app-cli å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸º bin å­ç›®å½•ä¸‹çš„ cli.jsï¼Œå› æ­¤åœ¨å®‰è£…äº† my-app-cli åŒ…çš„é¡¹ç›®ä¸­ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åˆ©ç”¨ npm æ‰§è¡Œè„šæœ¬ï¼š

```
"scripts": {
  start: 'node node_modules/.bin/my-app-cli'
}
```

- å’¦ï¼Œæ€ä¹ˆçœ‹èµ·æ¥å’Œ vue create/create-react-app ä¹‹ç±»çš„å‘½ä»¤ä¸å¤ªåƒï¼ŸåŸå› ï¼š

  - å½“éœ€è¦ node ç¯å¢ƒæ—¶å°±éœ€è¦åŠ ä¸Š node å‰ç¼€
  - å¦‚æœåŠ ä¸Š node å‰ç¼€ï¼Œå°±éœ€è¦æŒ‡å®š my-app-cli çš„è·¯å¾„ -> node_modules/.binï¼Œå¦åˆ™ node my-app-cli ä¼šå»æŸ¥æ‰¾å½“å‰è·¯å¾„ä¸‹çš„ my-app-cli.jsï¼Œè¿™æ ·è‚¯å®šæ˜¯ä¸å¯¹ã€‚

- è‹¥è¦å®ç°åƒ vue create/create-react-app ä¹‹ç±»çš„å‘½ä»¤ä¸€æ ·ç®€ä¾¿çš„æ–¹å¼ï¼Œåˆ™å¯ä»¥åœ¨ä¸Šæ–‡æåˆ°çš„ bin å­ç›®å½•ä¸‹å¯æ‰§è¡Œæ–‡ä»¶ cli.js ä¸­çš„ç¬¬ä¸€è¡Œå†™å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
#!/usr/bin/env node
```

## 13. man å­—æ®µ

---

man ç”¨æ¥æŒ‡å®šå½“å‰æ¨¡å—çš„ man æ–‡æ¡£çš„ä½ç½®ã€‚

```
"man" :[ "./doc/calc.1" ]
```

## 14. directories å­—æ®µ

---

directories åˆ¶å®šä¸€äº›æ–¹æ³•æ¥æè¿°æ¨¡å—çš„ç»“æ„, ç”¨äºå‘Šè¯‰ç”¨æˆ·æ¯ä¸ªç›®å½•åœ¨ä»€ä¹ˆä½ç½®ã€‚

## 15. repository å­—æ®µ

---

æŒ‡å®šä¸€ä¸ªä»£ç å­˜æ”¾åœ°å€ï¼Œå¯¹æƒ³è¦ä¸ºä½ çš„é¡¹ç›®è´¡çŒ®ä»£ç çš„äººæœ‰å¸®åŠ©

```
"repository" : {
  "type" : "git",
  "url" : "https://github.com/npm/npm.git"
}
```

## 16. scripts å­—æ®µ

---

scripts æŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„ npm å‘½ä»¤è¡Œç¼©å†™ï¼Œæ¯”å¦‚ start æŒ‡å®šäº†è¿è¡Œ npm run start æ—¶ï¼Œæ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚

```
"scripts": {
  "start": "node ./start.js"
}
```

ä½¿ç”¨ scripts å­—æ®µå¯ä»¥å¿«é€Ÿçš„æ‰§è¡Œ shell å‘½ä»¤ï¼Œå¯ä»¥ç†è§£ä¸º aliasã€‚

scripts å¯ä»¥ç›´æ¥ä½¿ç”¨ node_modules ä¸­å®‰è£…çš„æ¨¡å—ï¼Œè¿™åŒºåˆ«äºç›´æ¥è¿è¡Œéœ€è¦ä½¿ç”¨ npx å‘½ä»¤ã€‚

```
"scripts": {
  "build": "webpack"
}

// npm run build
// npx webpack
```

## 17. config å­—æ®µ

---

config å­—æ®µç”¨äºæ·»åŠ å‘½ä»¤è¡Œçš„ç¯å¢ƒå˜é‡ã€‚

```
{
  "name" : "yindong",
  "config" : { "port" : "8080" },
  "scripts" : { "start" : "node server.js" }
}
```

ç„¶åï¼Œåœ¨ server.js è„šæœ¬å°±å¯ä»¥å¼•ç”¨ config å­—æ®µçš„å€¼ã€‚

```
console.log(process.env.npm_package_config_port); // 8080
```

ç”¨æˆ·å¯ä»¥é€šè¿‡ npm config set æ¥ä¿®æ”¹è¿™ä¸ªå€¼ã€‚

```
npm config set yindong:port 8000
```

## 18. dependencies å­—æ®µ, devDependencies å­—æ®µ

---

dependencies å­—æ®µæŒ‡å®šäº†é¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—ï¼ŒdevDependencies æŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ã€‚

å®ƒä»¬çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å„ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«ç”±æ¨¡å—åå’Œå¯¹åº”çš„ç‰ˆæœ¬è¦æ±‚ç»„æˆï¼Œè¡¨ç¤ºä¾èµ–çš„æ¨¡å—åŠå…¶ç‰ˆæœ¬èŒƒå›´ã€‚

å½“å®‰è£…ä¾èµ–çš„æ—¶å€™ä½¿ç”¨--save å‚æ•°è¡¨ç¤ºå°†è¯¥æ¨¡å—å†™å…¥ dependencies å±æ€§ï¼Œ--save-dev è¡¨ç¤ºå°†è¯¥æ¨¡å—å†™å…¥ devDependencies å±æ€§ã€‚

```
"devDependencies": {
  "webpack": "^5.38.1",
}
```

å¯¹è±¡çš„æ¯ä¸€é¡¹é€šè¿‡ä¸€ä¸ªé”®å€¼å¯¹è¡¨ç¤ºï¼Œå‰é¢æ˜¯æ¨¡å—åç§°ï¼Œåé¢æ˜¯å¯¹åº”æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚ç‰ˆæœ¬å·éµå¾ªâ€œå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬â€çš„æ ¼å¼è§„å®šã€‚

> ç‰ˆæœ¬è¯´æ˜
>
> > å›ºå®šç‰ˆæœ¬: æ¯”å¦‚ 5.38.1ï¼Œå®‰è£…æ—¶åªå®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚
> > æ³¢æµªå·: æ¯”å¦‚~5.38.1, è¡¨ç¤ºå®‰è£… 5.38.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº 5.38.1ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 5.39.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚
> > æ’å…¥å·: æ¯”å¦‚ Ë†5.38.1, ï¼Œè¡¨ç¤ºå®‰è£… 5.x.x çš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº 5.38.1ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£… 6.x.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¤§ç‰ˆæœ¬å·ä¸º 0ï¼Œåˆ™æ’å…¥å·çš„è¡Œä¸ºä¸æ³¢æµªå·ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¤„äºå¼€å‘é˜¶æ®µï¼Œå³ä½¿æ˜¯æ¬¡è¦ç‰ˆæœ¬å·å˜åŠ¨ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥ç¨‹åºçš„ä¸å…¼å®¹ã€‚
> > latest: å®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚

## 19. peerDependencies å­—æ®µ

---

å½“æˆ‘ä»¬å¼€å‘ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰æ¨¡å—ä¸æ‰€ä¾èµ–çš„æ¨¡å—åŒæ—¶ä¾èµ–ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¹¶ä¸”ä¾èµ–çš„æ˜¯ä¸¤ä¸ªä¸å…¼å®¹çš„ç‰ˆæœ¬æ—¶å°±ä¼šå‡ºç°é—®é¢˜ã€‚

æ¯”å¦‚ï¼Œä½ çš„é¡¹ç›®ä¾èµ– A æ¨¡å—å’Œ B æ¨¡å—çš„ 1.0 ç‰ˆï¼Œè€Œ A æ¨¡å—æœ¬èº«åˆä¾èµ– B æ¨¡å—çš„ 2.0 ç‰ˆã€‚

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸æ„æˆé—®é¢˜ï¼ŒB æ¨¡å—çš„ä¸¤ä¸ªç‰ˆæœ¬å¯ä»¥å¹¶å­˜ï¼ŒåŒæ—¶è¿è¡Œã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æƒ…å†µï¼Œä¼šå‡ºç°é—®é¢˜ï¼Œå°±æ˜¯è¿™ç§ä¾èµ–å…³ç³»å°†æš´éœ²ç»™ç”¨æˆ·ã€‚

æœ€å…¸å‹çš„åœºæ™¯å°±æ˜¯æ’ä»¶ï¼Œæ¯”å¦‚ A æ¨¡å—æ˜¯ B æ¨¡å—çš„æ’ä»¶ã€‚ç”¨æˆ·å®‰è£…çš„ B æ¨¡å—æ˜¯ 1.0 ç‰ˆæœ¬ï¼Œä½†æ˜¯ A æ’ä»¶åªèƒ½å’Œ 2.0 ç‰ˆæœ¬çš„ B æ¨¡å—ä¸€èµ·ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œç”¨æˆ·è¦æ˜¯å°† 1.0 ç‰ˆæœ¬çš„ B çš„å®ä¾‹ä¼ ç»™ Aï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚å› æ­¤ï¼Œéœ€è¦ä¸€ç§æœºåˆ¶ï¼Œåœ¨æ¨¡æ¿å®‰è£…çš„æ—¶å€™æé†’ç”¨æˆ·ï¼Œå¦‚æœ A å’Œ B ä¸€èµ·å®‰è£…ï¼Œé‚£ä¹ˆ B å¿…é¡»æ˜¯ 2.0 æ¨¡å—ã€‚

peerDependencies å­—æ®µï¼Œå°±æ˜¯ç”¨æ¥ä¾›æ’ä»¶æŒ‡å®šå…¶æ‰€éœ€è¦çš„ä¸»å·¥å…·çš„ç‰ˆæœ¬ã€‚å¯ä»¥é€šè¿‡ peerDependencies å­—æ®µæ¥é™åˆ¶ï¼Œä½¿ç”¨ myless æ¨¡å—å¿…é¡»ä¾èµ– less æ¨¡å—çš„ 3.9.x ç‰ˆæœ¬.

```
{
  "name": "myless",
  "peerDependencies": {
    "less": "3.9.x"
  }
}
```

æ³¨æ„ï¼Œä» npm 3.0 ç‰ˆå¼€å§‹ï¼ŒpeerDependencies ä¸å†ä¼šé»˜è®¤å®‰è£…äº†ã€‚å°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸ä¼šé»˜è®¤å¸¦å‡ºã€‚

## 20. bundledDependencies å­—æ®µ

---

bundledDependencies æŒ‡å®šå‘å¸ƒçš„æ—¶å€™ä¼šè¢«ä¸€èµ·æ‰“åŒ…çš„æ¨¡å—.

## 21. optionalDependencies å­—æ®µ

---

å¦‚æœä¸€ä¸ªä¾èµ–æ¨¡å—å¯ä»¥è¢«ä½¿ç”¨ï¼Œ åŒæ—¶ä½ ä¹Ÿå¸Œæœ›åœ¨è¯¥æ¨¡å—æ‰¾ä¸åˆ°æˆ–æ— æ³•è·å–æ—¶ npm ç»§ç»­è¿è¡Œï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæ¨¡å—ä¾èµ–æ”¾åˆ° optionalDependencies é…ç½®ä¸­ã€‚è¿™ä¸ªé…ç½®çš„å†™æ³•å’Œ dependencies çš„å†™æ³•ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯è¿™é‡Œè¾¹å†™çš„æ¨¡å—å®‰è£…å¤±è´¥ä¸ä¼šå¯¼è‡´ npm install å¤±è´¥ã€‚

## 22. engines å­—æ®µ

---

engines å­—æ®µæŒ‡æ˜äº†è¯¥æ¨¡å—è¿è¡Œçš„å¹³å°ï¼Œæ¯”å¦‚ Node æˆ–è€… npm çš„æŸä¸ªç‰ˆæœ¬æˆ–è€…æµè§ˆå™¨ã€‚

```
{ "engines" : { "node" : ">=0.10.3 <0.12", "npm" : "~1.0.20" } }
```

## 23. os å­—æ®µ

---

å¯ä»¥æŒ‡å®šä½ çš„æ¨¡å—åªèƒ½åœ¨å“ªä¸ªæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ

```
"os" : [ "darwin", "linux", "win32" ]
```

## 24. cpu å­—æ®µ

---

é™åˆ¶æ¨¡å—åªèƒ½åœ¨æŸç§æ¶æ„çš„ cpu ä¸‹è¿è¡Œ

```
"cpu" : [ "x64", "ia32" ]
```

## 25. private å­—æ®µ

---

å¦‚æœè¿™ä¸ªå±æ€§è¢«è®¾ç½®ä¸º trueï¼Œnpm å°†æ‹’ç»å‘å¸ƒå®ƒï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢ä¸€ä¸ªç§æœ‰æ¨¡å—è¢«æ— æ„é—´å‘å¸ƒå‡ºå»ã€‚

```
"private": true
```

## 26. publishConfig å­—æ®µ

---

è¿™ä¸ªé…ç½®æ˜¯ä¼šåœ¨æ¨¡å—å‘å¸ƒæ—¶ç”Ÿæ•ˆï¼Œç”¨äºè®¾ç½®å‘å¸ƒç”¨åˆ°çš„ä¸€äº›å€¼çš„é›†åˆã€‚å¦‚æœä½ ä¸æƒ³æ¨¡å—è¢«é»˜è®¤æ ‡è®°ä¸ºæœ€æ–°çš„ï¼Œæˆ–è€…é»˜è®¤å‘å¸ƒåˆ°å…¬å…±ä»“åº“ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½® tag æˆ–ä»“åº“åœ°å€ã€‚

é€šå¸¸ publishConfig ä¼šé…åˆ private æ¥ä½¿ç”¨ï¼Œå¦‚æœä½ åªæƒ³è®©æ¨¡å—è¢«å‘å¸ƒåˆ°ä¸€ä¸ªç‰¹å®šçš„ npm ä»“åº“ï¼Œå¦‚ä¸€ä¸ªå†…éƒ¨çš„ä»“åº“ã€‚

```
"private": true,
"publishConfig": {
  "tag": "1.0.0",
  "registry": "https://registry.npmjs.org/",
  "access": "public"
}
```

## 27. preferGlobal å­—æ®µ

---

preferGlobal çš„å€¼æ˜¯å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“ç”¨æˆ·ä¸å°†è¯¥æ¨¡å—å®‰è£…ä¸ºå…¨å±€æ¨¡å—æ—¶ï¼ˆå³ä¸ç”¨â€“global å‚æ•°ï¼‰ï¼Œè¦ä¸è¦æ˜¾ç¤ºè­¦å‘Šï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„æœ¬æ„å°±æ˜¯å®‰è£…ä¸ºå…¨å±€æ¨¡å—ã€‚

```
"preferGlobal": false
```

## 28. browser å­—æ®µ

---

browser æŒ‡å®šè¯¥æ¨¡æ¿ä¾›æµè§ˆå™¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚Browserify è¿™æ ·çš„æµè§ˆå™¨æ‰“åŒ…å·¥å…·ï¼Œé€šè¿‡å®ƒå°±çŸ¥é“è¯¥æ‰“åŒ…é‚£ä¸ªæ–‡ä»¶ã€‚

```
"browser": {
  "tipso": "./node_modules/tipso/src/tipso.js"
},
```

å‚è€ƒæ¥æº

- [1] [npm package.json](https://link.juejin.cn/?target=http%3A%2F%2Fcaibaojian.com%2Fnpm%2Ffiles%2Fpackage.json.html)
- [2] [javaScript æ ‡å‡†å‚è€ƒæ•™ç¨‹](https://link.juejin.cn/?target=http%3A%2F%2Fjavascript.ruanyifeng.com%2Fnodejs%2Fpackagejson.html)

è½¬è‡ªï¼š[ã€æ˜é‡‘ã€‘](https://juejin.cn/post/6987179395714646024) ä½ çœŸçš„äº†è§£ package.json å—ï¼Ÿæ¥çœ‹çœ‹å§ï¼Œè¿™å¯èƒ½æ˜¯æœ€å…¨çš„ package è§£æ "éšå†¬"
