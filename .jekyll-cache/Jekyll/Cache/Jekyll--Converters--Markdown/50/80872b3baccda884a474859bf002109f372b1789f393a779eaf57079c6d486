I"ß<h1 id="curl-command">Curl Command</h1>

<h3 id="curl-æŒ‡ä»¤åŸºæœ¬ä»‹ç´¹èˆ‡å¸¸è¦‹ç”¨æ³•">Curl æŒ‡ä»¤åŸºæœ¬ä»‹ç´¹èˆ‡å¸¸è¦‹ç”¨æ³•</h3>

<blockquote>
  <p>Curl æ˜¯ä¸€å€‹åœ¨ Linux ä¸Šç”¨ä¾†é€é HTTP Protocolï¼ˆHTTP HyperText Transfer Protocol å®šç¾©å­˜å–ç¶²è·¯è³‡æºçš„å”å®šï¼Œè®“æˆ‘å€‘å¯ä»¥ä½¿ç”¨ client / server æ¨¡å¼ä¾†å–å¾—ç¶²è·¯è³‡æºï¼‰ä¸‹è¼‰å’Œä¸Šå‚³æª”æ¡ˆçš„æŒ‡ä»¤ï¼ˆæ¯”èµ· wget åªèƒ½ä¸‹è¼‰å¼·å¤§è¨±å¤šï¼‰ã€‚å®ƒåŸºæœ¬çš„æŒ‡ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
</blockquote>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl [options] [URL...]
</code></pre></div></div>

<p>æ‰“é–‹çµ‚ç«¯æ©Ÿï¼ˆterminalï¼‰ç„¶å¾Œï¼Œcurl å¾Œé¢åŠ ç¶²å€ï¼Œå°±æœƒåœ¨çµ‚ç«¯æ©Ÿå…§é¡¯ç¤ºå›å‚³çš„ responseï¼Œå¯èƒ½æ˜¯ HTMLã€JSON æˆ–æ˜¯ XML ç­‰æ ¼å¼ï¼Œæ ¹æ“šè¼¸å…¥çš„ URL å…§å®¹è€Œå®šã€‚</p>

<pre><code class="language-js">curl https://www.baidu.com</code></pre>

<h4 id="ä¸‹è½½">ä¸‹è½½ï¼š</h4>

<p>ä¸‹è¼‰ï¼šå¯ä»¥ä½¿ç”¨ -o æ­é…æ¬²ä¸‹è¼‰çš„æª”åå’Œç¶²å€;</p>

<pre><code class="language-js">curl -o vue.png https://cn.vuejs.org/images/logo.png</code></pre>

<p>è‹¥æ˜¯ä½¿ç”¨ -O å‰‡å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹è¼‰ç¶²å€çš„æª”æ¡ˆæª”åä¾†å‘½åä¸‹è¼‰çš„æª”æ¡ˆ;</p>

<pre><code class="language-js">curl -O https://cn.vuejs.org/images/logo.png</code></pre>

<p>æœ‰å¯èƒ½åœ¨ä¸‹è¼‰éç¨‹ä¸­è¢«ä¸­æ–·ï¼Œè‹¥æ˜¯æƒ³è¦å¾ä¸­æ–·çš„åœ°æ–¹ç¹¼çºŒçš„è©±ï¼Œå¯ä»¥ä½¿ç”¨ -C é¸é …ï¼š</p>

<pre><code class="language-js">curl -C - -O http://releases.ubuntu.com/18.04/ubuntu-18.04-desktop-
amd64.iso</code></pre>

<p>è‹¥å¸Œæœ›å¯ä»¥è·Ÿéš¨è‘—ç¶²å€ 301/302 redirect çš„è©±ï¼Œå¯ä»¥ä½¿ç”¨ -L é¸é …ï¼š</p>

<pre><code class="language-js">curl -L http://google.com</code></pre>

<p>è‹¥æˆ‘å€‘è¦è¿½è¹¤æ•´å€‹ curl éç¨‹ï¼Œä¸¦å°‡çµæœå­˜å…¥ debugdump.txt æª”æ¡ˆå¯ä»¥ä½¿ç”¨ â€“trace-ascii æŒ‡ä»¤ï¼š</p>

<pre><code class="language-js">curl --trace-ascii debugdump.txt http://www.example.com/</code></pre>

<h2 id="ä½¿ç”¨-curl-ä¾†é€²è¡Œ-http-request">ä½¿ç”¨ Curl ä¾†é€²è¡Œ HTTP Request</h2>

<p>é™¤äº†ç°¡æ˜“çš„ä¸‹è¼‰æª”æ¡ˆæˆ–æ˜¯å–å¾—ç¶²é å…§å®¹å¤–ï¼ŒCurl é‚„æ”¯æ´å„ç¨®ä¸åŒ HTTP è«‹æ±‚æ–¹æ³•ï¼ˆHTTP methodï¼‰ï¼Œä»¥ä¸‹åˆ—å‡ºå¸¸ç”¨æŒ‡ä»¤å’Œé¸é …åƒæ•¸ï¼š</p>

<table>
  <thead>
    <tr>
      <th>å‚æ•°</th>
      <th>è¯¦æƒ…</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>-X/â€“request [GET|POST|PUT|DELETE|PATCH]</td>
      <td>ä½¿ç”¨æŒ‡å®šçš„ http method ä¾†ç™¼å‡º http request</td>
    </tr>
    <tr>
      <td>-H/â€“header</td>
      <td>è¨­å®š request è£¡æ‰€æ”œå¸¶çš„ header</td>
    </tr>
    <tr>
      <td>-i/â€“include</td>
      <td>åœ¨ output é¡¯ç¤º response çš„ header</td>
    </tr>
    <tr>
      <td>-d/â€“data</td>
      <td>æ”œå¸¶ HTTP POST Data</td>
    </tr>
    <tr>
      <td>-v/â€“verbose</td>
      <td>è¼¸å‡ºæ›´å¤šçš„è¨Šæ¯æ–¹ä¾¿ debug</td>
    </tr>
    <tr>
      <td>-u/â€“user</td>
      <td>æ”œå¸¶ä½¿ç”¨è€…å¸³è™Ÿã€å¯†ç¢¼</td>
    </tr>
    <tr>
      <td>-b/â€“cookie</td>
      <td>æ”œå¸¶ cookieï¼ˆå¯ä»¥æ˜¯åƒæ•¸æˆ–æ˜¯æª”æ¡ˆä½ç½®ï¼‰</td>
    </tr>
  </tbody>
</table>

<h4 id="1-get">1. GET</h4>

<p>ç°¡æ˜“ä¸€å€‹ URL ç‰ˆæœ¬ï¼Œå¯ä»¥æ”œå¸¶ query string åƒæ•¸å–å¾—ç¶²è·¯è³‡æº:</p>

<pre><code class="language-js">$ curl https://example.com?q1=123&amp;q2=abc</code></pre>

<p>åœ¨åŒä¸€å€‹æŒ‡ä»¤ä½¿ç”¨å¤šå€‹ URLï¼š</p>

<pre><code class="language-js">$ curl http://example1.com http://example2.com</code></pre>

<h4 id="2-form-post">2. Form POST</h4>

<p>ä¸€èˆ¬è€Œè¨€æˆ‘å€‘ Form è¡¨å–®çš„ HTML æœƒé•·é€™æ¨£ï¼š</p>

<pre><code class="language-js">&lt;form method="POST" action="form.php"&gt;
   &lt;input type=text name="email"&gt;
   &lt;input type=submit name=press value=" OK "&gt;
&lt;/form&gt;</code></pre>

<p>ç”±æ–¼ Form post æ˜¯ä½¿ç”¨ application/x-www-form-urlencoded Content-Typeï¼Œæ‰€ä»¥å‚³éçš„å€¼éœ€è¦ç·¨ç¢¼ï¼š</p>

<pre><code class="language-js">ï¼„ curl -X POST --data "email=test@example.com&amp;press=%20OK%20" http://
www.example.com/form.php</code></pre>

<h4 id="3-file-upload-post">3. File Upload POST</h4>

<p>å¦ä¸€ç¨®å¸¸è¦‹ Form è¡¨å–®æ˜¯æœ‰æ¶‰åŠæª”æ¡ˆä¸Šå‚³ï¼ˆä½¿ç”¨ multipart/form-data Content-Typeï¼‰ï¼š</p>

<pre><code class="language-js">&lt;form method="POST" enctype='multipart/form-data' action="upload.php"&gt;
 &lt;input type=file name=upload&gt;
 &lt;input type=submit name=press value="OK"&gt;
&lt;/form&gt;</code></pre>

<p>å¯ä»¥çœ‹åˆ°æŒ‡ä»¤æœƒéœ€è¦æ”œå¸¶ upload æª”æ¡ˆï¼š</p>

<pre><code class="language-js">curl -X POST -F 'file=@./upload.txt' http://www.example.com/upload.php</code></pre>

<h4 id="4-å¸¸è¦‹-restful-crud-æŒ‡ä»¤">4. å¸¸è¦‹ Restful CRUD æŒ‡ä»¤ï¼š</h4>

<ul>
  <li>GET å–®ä¸€å’Œå…¨éƒ¨è³‡æº:</li>
</ul>

<pre><code class="language-js">$ curl -X GET "http://www.example.com/api/resources"
$ curl -X GET "http://www.example.com/api/resources/1"</code></pre>

<ul>
  <li>POST JSON è³‡æ–™ï¼š</li>
</ul>

<pre><code class="language-js">$ curl -X POST -H "Content-Type: application/json" -d '{"status" : 
false, "name" : "Jack"}' "http://www.example.com/api/resources"</code></pre>

<ul>
  <li>PUT JSON è³‡æ–™ï¼š</li>
</ul>

<pre><code class="language-js">curl -X PUT -H "Content-Type: application/json" -d '{"status" : false 
}' "http://www.example.com/api/resources"</code></pre>

<ul>
  <li>DELETE è³‡æºï¼š</li>
</ul>

<pre><code class="language-js">$ curl -X DELETE "http://www.example.com/api/resources/1"</code></pre>

<ul>
  <li>æ”œå¸¶ cookieã€åœ¨æŒ‡ä»¤ä¸­è¼¸å…¥ cookieã€‘ï¼š</li>
</ul>

<pre><code class="language-js">$ curl --cookie "name=Jack" http://www.example.com</code></pre>

<ul>
  <li>æ”œå¸¶ cookieã€å¾æª”æ¡ˆè®€å– cookieã€‘ï¼š</li>
</ul>

<pre><code class="language-js">$ curl --cookie stored_cookies_file_path http://www.example.com</code></pre>

<ul>
  <li>æ”œå¸¶ User Agent</li>
</ul>

<pre><code class="language-js">$ curl --user-agent "Mozilla/5.0 (compatible; MSIE 5.01; Windows NT 5.0
)" http://www.example.com</code></pre>

<ul>
  <li>Basic Authenticationã€è‹¥æ‰€å­˜å–ç¶²é æœ‰ä½¿ç”¨ Basic Authenticationï¼Œå¯ä»¥æ”œå¸¶ â€“user username:password ä¾†é€šéé©—è­‰ï¼šã€‘</li>
</ul>

<pre><code class="language-js">$ curl -i --user secret:vary_secret http://www.example.com/api/resources</code></pre>
:ET